pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- room =======================

room = {}

function room.spawn(a, rx, ry)
	a.bads = {}
	for x = 0,16 do
		for y = 0,16 do
			local f = mget(rx+x, ry+y)
				if fget(f, 0) then
					add(a.bads, {
						f = f,
						x = x*8,
						y = y*8
					})
				end
			end
		end
end

function room.move()
end

function room.draw(a)
	for b in all(a.bads) do
		spr(b.f, b.x, b.y)
	end
end

-- select =====================

select = {n = 0}

function select.move(a)
	if btnp"4" then
		a.n = (a.n + 1) % 32
	elseif btnp"5" then
		room:spawn(a:coords())
		state = room
	end
end

function select.coords(a)
	local x = a.n % 8 * 16
	local y = flr(a.n / 8) * 16
	return x, y
end

function select.draw(a)
	local x, y = a:coords()
	print(a.n)
	map(x, y, 0, 0, 16, 16)
end

-- callbacks ==================

function _init()
	state = select
end

function _update()
	state:move()
end

function _draw()
	cls()
	state:draw()
end
__gfx__
00000000666666660080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666660008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666666660008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666666660000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000666666660008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666660088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
10101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010
10101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
00000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010
10101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010
10101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000100000000000000000000000000000001
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101
