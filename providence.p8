pico-8 cartridge // http://www.pico-8.com
version 15
__lua__
-- providence
-- work in progress

pink = 14

function wav(val,amp,len)
	return amp*sin(val/len)
end


function new_backdrop()
	local backdrop = {v=0}

	function backdrop:update()
		local speed = wav(gt,0.7,98)
		self.v += speed
	end

	function backdrop:draw()
		cls()
		map(16,0,0,0,16,16)
		map(32,0,0,-64+self.v,16,32)
		map(0,16,64+self.v,72,16,2)
		map(0,16,-64-self.v,72,16,2)
		map(0,0,0,0,16,16)
	end

 return backdrop
end


function new_eye()
	local eye =
	{ x = 48, y = 0, by = 0
	, px = 0, py = 0
	}

	function eye:update()
		self.y = 1+wav(gt,1.98,98)
		self.by = -2+wav(gt+40,2.98,98)

		local d = atan2(cross.x-64,cross.y-20)
		self.px = flr(2*cos(d)+0.5)
		self.py = flr(2*sin(d)+0.5)
	end

	function eye:draw()
		spr(010,self.x-8,self.by,6,4)
		spr(078,
				self.x+self.px+8,
				self.y+self.py+16,2,2)
		spr(006,self.x,self.y,4,4)
	end

	return eye
end


function new_cross()
	local cross =
	{ x = 64, y = 112
	, speed = 2
	}

	function cross:joydelta()
		local dx,dy = 0,0
		if (btn"0") dx -= self.speed
		if (btn"1") dx += self.speed
		if (btn"2") dy -= self.speed
		if (btn"3") dy += self.speed
		return dx,dy
	end

	function cross:update()
		local dx,dy = self:joydelta()
		self.x += dx
		self.y += dy
		self.x = min(max(self.x,0),120)
		self.y = min(max(self.y,0),120)
	end

	function cross:draw()
		spr(072,self.x,self.y)
	end

	return cross
end


function transparent(col)
	palt(0,false)
	palt(col,true)
end

function _init()
	gt = 0
	transparent(pink)

	backdrop = new_backdrop()
	eye = new_eye()
	cross = new_cross()
end

function _update()
	gt += 1
	backdrop:update()
	eye:update()
	cross:update()
end

function _draw()
	backdrop:draw()
	eye:draw()
	cross:draw()
end
__gfx__
000000001111111111111111eeeeeeee0eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee1155555555551133333333333333333333333311115511e
000000001333333333333333eeeeeeee0eeeeeeeeeeeeeeeeeeeeeeeeeeeeee00eeeeeeeeeeeeeeeee1115555555551133333333333333333333311115555511
007007001333333333333333eeeeeee030eeeeeeeeeeeeeeeeeeeeeeeeeeee0330eeeeeeeeeeeeeeeee111155555555113333333333333333311111555555551
000770001333333333333333eeeeeee030eeeeeeeeeeeeeeeeeeeeeeeeeee03bb30eeeeeeeeeeeeeeeee11111555555511333333333333333111155555555111
000770001333333333333333eeeeee03330eeeeeeeeeeeeeeeeeeeeeeeeee03bb30eeeeeeeeeeeee11e11331111555555111333333333331111555555551111e
007007001333333333333333eeeeee03330eeeeeeeeeeeeeeeeeeeeeeeee03bbbb30eeeeeeeeeeee151133333111115555511333333331111555555551111eee
000000001333333333333333eeeee0333330eeeeeeeeeeeeeeeeeeeeeeee03bbbb30eeeeeeeeeeee1511333333311115555511133311111555555551113111ee
000000001555555555555555eeeee0555550eeeeeeeeeeeeeeeeeeeeeee03bbbbbb30eeeeeeeeeee15511333333311111555511111115555555551113333151e
eeeeeeeeeeeeeeeeeeeeeeeeeeee011111110eee15151515eeeeeeeeeee03bbbbbb30eeeeeeeeeee155111133333333111155551115555555551111333331551
eeeeeeeeeeeeeeeeeeeeeeeeeeee033333330eee51515151eeeeeeeeee03bbbbbbbb30eeeeeeeeee115551111333333331115555555555555111113333331151
eeeeeeeeeeeeeeeeeeeeeeeeeee03333333330ee15151515eeeeeeeeee03bbbbbbbb30eeeeeeeeeee15555511113333333311555555555511113333333311551
eeeeeeeeeeeeeeeeeeeeeeeeeee03333333330ee51515151eeeeeeeee03bbbbbbbbbb30eeeeeeeeee11555555111133333331155555511111333333331115551
eeeeeeeeeeeeeeeeeeeeeeeeee0333333333330e15151515eeeeeeeee03bbbbbbbbbb30eeeeeeeeeee1555555551111333333111555111133333333111155551
eeeeeeeeeeeeeeeeeeeeeeeeee0333333333330e51515151eeeeeeee03bbbbbbbbbbbb30eeeeeeeeee1115555555511113333311111113333333311115555511
eeeeeeeeeeeeeeeeeeeeeeeee03333333333333015151515eeeeeeee03bbbbbbbbbbbb30eeeeeeeeeee111155555551111133331111333333331111555555511
eeeeeeeeeeeeeeeeeeeeeeeee05555555555555051515151eeeeeee03bbbbbbbbbbbbbb30eeeeeeeeeee11111555555511111331133333333111115555555111
eeeeeeeeeeeeeeeeeeeeeeee011111110111111100000000eeeeeee03bbbbbbbbbbbbbb30eeeeeeee11e1131111555555551111113333331111555555551111e
eeeeeeeeeeeeeeeeeeeeeeee033333330333333300000000eeeeee03bbbbb111111bbbbb30eeeeee15111333311111555555511113333111155555555111eeee
eeeeeeeeeeeeeeeeeeeeeee0333333333333333310001000eeeeee03bbb1111111111bbb30eeeeee1511333333311115555555511331111555555551111eeeee
eeeeeeeeeeeeeeeeeeeeeee0333333333333333301010101eeeee03bb1111eeeeee1111bb30eeeee1551133333333111155555511111155555551111111eeeee
eeeeeeeeeeeeeeeeeeeeee03333333333333333310101010eeeee03b111eeeeeeeeee111b30eeeee15511113333333111115555111155555555111133311eeee
e000000000000000eeeeee03333333333333333331013101eeee03b1177eeeeeeeeee7711b30eeee11555111133333333111115115555555511113333331eeee
eb3b3b3b3b3b3b3beeeeee03333333333333333313131313eeee03b1777eeeeeeeeee7771b30eeeee15555511111333333111111155555511113333333311111
e000000000000000eeeeee33555555553333333301310131eee03bbb177eeeeeeeeee771bbb30eeee11555555111133333333111155111111333333333333331
1b111b111eeeeeee0eeeeeee111111111111111113131313eee03bbbb11eeeeeeeeee11bbbb30eeeee1555555551111333331111111111133333333133333331
111311131eeeeeee0eeeeeee133333333333333331013101ee03bbbbbbb11eeeeee11bbbbbbb30eeee1115555555511111311eeeeee11333333331111333311e
131113111eeeeeee30eeeeee133333333333333313131313ee03bbbbbbbbb111111bbbbbbbbb30eeeee11115555555511111eeeeeeee1133333111eee1111eee
111b111b1eeeeeee30eeeeee133333333333333331313131e03bbbbbbbbbbbbbbbbbbbbbbbbbb30eeeeee1111555555551eeeeeeeeeeee11311eeeeeeeeeeeee
1b111b111eeeeeee330eeeee133333333333333313131313e03bbbbbbbbbbbbbbbbbbbbbbbbbb30eeeeeeeee111555551eeeeeeeeeeeeee1111eeeeeeeeeeeee
111311131eeeeeee330eeeee13333333333333333131313103bbbbbbbbbbbbbbbbbbbbbbbbbbbb30eeeeeeeeee111111eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
131113111eeeeeee330eeeee13333333333333331313131303333333333333333333333333333330eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
111b111b1eeeeeee333eeeee33333333333333331111111100000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
0000033333000000000000000000000000000000000000000000000000000000eeeeeeee0000000000000000000000000000000000000000eee7777777777eee
0003333333330000000000000000003000000000000000000000000000000000e88e88ee0000000000000000000000000000000000000000e77777777777777e
00333333333330000000000500000000000050000000000000000000000050008888888e0000000000000000000000000000000000000000e77777777777777e
03333333333333000010000000000000000000000000000000030000000000008888888e00000000000000000000000000000000000000007777773333777777
03333333333333000000000000000000000000000000000000000000000000008888888e00000000000000000000000000000000000000007777733003377777
3333333333333330000000000005000000300001000000000000000001000000e88888ee00000000000000000000000000000000000000007777730700377777
3333333333333330000000000000000000000000000005000000000000000000ee888eee00000000000000000000000000000000000000007777730000377777
3333333333333330050000000000000000000000000000000000000000000000eee8eeee00000000000000000000000000000000000000007777733003377777
33333333333333300000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000007777773333777777
3333333333333330000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e77777777777777e
0333333333333300000000000000000000000000050000000000000000050000000000000000000000000000000000000000000000000000e77777777777777e
0333333333333300000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000eee7777777777eee
0033333333333000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeee
0003333333330000003000000000000000300000000010000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeee
0000033333000000000000000010000000000000000000000000001000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeee
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeee
__map__
0000000000000000000000000000000000004600000000000000000053000045000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000043004343000000000000004500404100000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000055465253000000000000000000505100000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000043440000540000000000000053450057000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000465355000000000000004544574344000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000202121212121000000000042000044000000000000004600465354000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000003230102010201040000000052544557000000000000000043000045000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000013010201020102140000000057000000000000000000000000570000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000323020102010201020400000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000001302010201020102011400000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000032301020102010201020104000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000130102010201020102010214000015151515151515151515151515151515000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0003230201020102010201020102040015151515151515151515151515151515000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0013020102010201020102010201140015151515151515151515151515151515000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2224333433343334333433343334333215151515151515151515151515151515000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1515151515151515151515151515151515151515151515151515151515151515000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2525252525252525252525252525252525252525250000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3535353535353535353535353535353535353535350000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000030303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
