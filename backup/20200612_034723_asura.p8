pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- asura
--
-->8
-- deva
function _deva(x,y,ctrl)
	return{
		x=x,
		y=y,
		dx=0,
		dy=0,
		ng=0,
		flap=0,
		control=function(a)
			if btn"0" and a.ng>-4 then
				a.ng-=1
			end
			if btn"1" and ng<4 then
				a.ng+=1
			end
			if btn"2" then
			end
			if btn"3" and a.dy<1 then
				a.dy=4
			end
			if btn"4" and a.flap==0 then
				a.flap=1
				a.dy=-8
			end
		end,
		update=function(a)
			a.x+=a.dx
			a.y+=a.dy
			a.dx*=0.777
			a.dy*=0.777
		end,
		draw=function(a)
			local f=abs(a.flap)
			local x,y=a.x,a.y
			spr(2+f,x-8,y,1,1,true)
			spr(2+f,x+8,y)
			spr(1,x,y)
		end
	}
end
-->8

-->8
-- init
function _init()
	actors={}
	pl=_deva(64,64,true)
	add(actors,pl)
end

-- update
function _update()
	for a in all(actors) do
		if a==pl then
			a:control()
		end
		a:update()
	end
end

-- draw
function _draw()
	cls()
	for a in all(actors) do
		a:draw()
	end
end
__gfx__
00000000a000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aaaaaaaa0777777007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaaaaaaa0777777707777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a00aa00a0777777707777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000aa0000077077700777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000aa0000000007700077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000aa0000000000000077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaa000000000000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
