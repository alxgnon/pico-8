pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- boi
--
function _init()
	palt(0,false)
	start(2,12)
	spawn(8,108)
	for i=0,127 do
		if(rnd(100)>70)mset(i,0,65)
	end
end

function start(h,x)
	pt=0
	px=x
	py=100
	pz=0
	head=h
	chest=18
	arms=19
	weapon=20
	legs=34
	boots=50
	still=true
end

function spawn(h,x)
	et=0
	ex=x
	ey=100
	ez=0
	ehead=h
	echest=24
	earms=25
	eweapon=26
	elegs=40
	eboots=56
end

function _update()
	walk()
end

function walk()
	if btn(1) then
		px+=3
		pt=(pt+1)%12
		still=false
	else
		still=true
	end
	if still and pt%12!=0 then
		if pt%12<7 then
			pt=(pt-1)%12
		elseif pt%12>=7 then
			pt=(pt+1)%12
		end
	end
end

function _draw()
	cls()
	local y=py-7+abs(pt%11-6)
	dbody(y)
	dlegs(y)
	darms(y)
	y=ey
	debody(y)
	delegs(y)
	dearms(y)
	rectfill(0,100,128,128,5)
	map(0,0,0,100,128,1)
end

function dbody(y)
	spr(head,px,y-28)
	spr(chest,px,y-20)
end

function dlegs(y)
	if pt%12>1 and pt%12<9 then
		spr(legs+1,px,y-12)
		spr(boots+1,px-8,y-12,1,1,true,true)
		spr(boots+1,px+8,y-12)
	else
		spr(legs,px,y-12)
		spr(boots,px,y-4)
	end
end

function darms(y)
end

function debody(y)
	spr(ehead,ex,y-28,1,1,true)
	spr(echest,ex,y-20,1,1,true)
end

function delegs(y)
end

function dearms(y)
end


function draw_dude(a)
	local fx=f and -8 or 8
	spr(a.arms-2,x-fx,y-20,1,1,f)
	if a.n==1 then
		spr(a.arms-3,x+fx,y-25,1,1,not f,true)
		spr(a.weapon+16,x+fx*1.125,y-40,1,2,f,true)
	elseif a.n==3 then
		spr(a.arms-2,x+fx,y-20,1,1,not f)
		spr(a.weapon+16,x+fx,y-12,1,2,f)
	else
		spr(a.arms,x+fx,y-20,1,1,f)
		if f then
			fx=fx*2-8
		else
			fx*=2
		end
		spr(a.weapon,x+fx,y-20,2,1,f)
	end
end
__gfx__
00000000000000000444444400000000000000000000000000000000000000000999999900000000000000000000000000000000000000000666666600000000
00000000000000004400400400000000000000000000000000000000000000009900900900000000000000000000000000000000000000006600600600000000
00700700000000004400400400000000000000000000000000000000000000009900900900000000000000000000000000000000000000006600600600000000
00077000000000004444444400000000000000000000000000000000000000009999999900000000000000000000000000000000000000006666666600000000
00077000000000004444444400000000000000000000000000000000000000009000000900000000000000000000000000000000000000006666666600000000
00700700000000004090909000000000000000000000000000000000000000009000000900000000000000000000000000000000000000006060606000000000
00000000000000000409090900000000000000000000000000000000000000009099990900000000000000000000000000000000000000000606060600000000
00000000000000000044444400000000000000000000000000000000000000009990099900000000000000000000000000000000000000000066666600000000
00004440000000000000000000000000000000000000000000004440000000000000000000000000090000000000000000000060000000000000000000000000
00044440000004404400004404440000040000000000000000044440000004406600006604440000096666666666666000066660000066606600006606000006
00044440000044404440044404444444046666666660000000044440000044406660066604444464090000000000000600060060000006006660066606666666
00044000000044404444444404444444046666666600000000044000000044406666666604444464096666666666666000060000000006000666666006000006
00044000000044400444444000000000040000000000000000044000000044400666666000000000090000000000000000060000000006000006600000000000
00044000000004400444444000000000000000000000000000066000000004400666666000000000000000000000000000060000000006000666666000000000
00044000000004400444444000000000000000000000000000044000000006600666666000000000000000000000000000666000000006000006600000000000
00000000000004400444444000000000000000000000000000000000000004400666666000000000000000000000000000000000000066600666666000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000444994004449940044440000000000000000000000000000444994004449940999990000000000000000000000000000666666006666660
00000000000000000666666006666660006600000000000000000000000000000cccccc00cccccc0060600000000000000000000000000000606606006066060
00000000000000000666666066666666006600000000000000000000000000000cccccc0cccccccc060600000000000000000000000000000666666066666666
00000000000000000666066066666666006600000000000000000000000000000ccc0cc0cccccccc060600000000000000000000000000000060060000000000
00000000000000000666066000000000006600000000000000000000000000000ccc0cc000000000060600000000000000000000000000000060060000000000
00000000000000000666066000000000006600000000000000000000000000000ccc0cc000000000060600000000000000000000000000000060060000000000
00000000000000000660066000000000006600000000000000000000000000000cc00cc000000000060600000000000000000000000000000060060000000000
00000000000000000000000000000000006600000000000000000000000000000000000000000000060600000000000000000000000000000000000000000000
00000000000000000440044000000000006600000000000000000000000000000660066000000000060600000000000000000000000000000060060000000000
00000000000000000440044000440000006000000000000000000000000000000660066000660000060600000000000000000000000000000060060000060000
00000000000000000444044444440000000000000000000000000000000000000666066666660000060600000000000000000000000000000060060000060000
00000000000000000444044444440000000000000000000000000000000000000666066666660000060600000000000000000000000000000666066666660000
00000000000000000000000000000000000000000000000000000000000000000000000000000000060600000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000060600000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000
66666660665666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666660665665500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666660665655600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666660666566600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666660655566600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666660566556600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555550555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040
