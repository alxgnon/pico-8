pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function _init()
	palt(0,false)
	palt(1,true)
	p_x,p_y=56,32
	shot={}
	has={[4]=true,[5]=true}
	released={[4]=false,[5]=false}
end

function _update()
	move_shots()
	control_player()
	move_player()
	control_shooting()
end

function control_player()
	p_dx,p_dy=0,0
	if(btn"0")p_dx-=5
	if(btn"1")p_dx+=5
	if(btn"2")p_dy-=5
	if(btn"3")p_dy+=5
end

function move_player()
	if p_dx*p_dy!=0 then
		p_dx*=0.707
		p_dy*=0.707
	end
	p_x=min(max(p_x+p_dx,-4),117)
	p_y=min(max(p_y+p_dy,-4),117)
end

function control_shooting()
	if btn"4" then
		if has[4] and released[4] then
			add(shot,{x=p_x-8,y=p_y-4})
			has[4]=false
			released[4]=flase
		end
	else
		released[4]=true
	end
	if btn"5" then
		if has[5] and released[5] then
			add(shot,{x=p_x+16,y=p_y-4})
			has[5]=false
			released[5]=false
		end
	else
		released[5]=true
	end
end

function move_shots()
	for e in all(shot) do
		e.y+=7
		if e.y>138 then
			del(shot,e)
		end
	end
end

function _draw()
	cls()
	spr(16,p_x,p_y,2,2)
	if(has[4])spr(2,p_x-8,p_y-4,1,4)
	if(has[5])spr(2,p_x+16,p_y-4,1,4)
	for e in all(shot) do
		spr(2,e.x,e.y,1,4)
	end
end
__gfx__
000000000000000011aaa11100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000011aaa11100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000001199911100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000001199911100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000001199911100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000001199911100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000aaaaaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000aaaaaaa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111aaaaa1111111766661100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111aaa888aaa11111766661100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11aaa87888aaa1111766661100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1aaaa88888aaaa111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1aaaaa888aaaaa111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa000aaaaa000aa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0c00aaa00c0aa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0cc00000cc0aa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0ccc000ccc0aa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa00cc000cc00aa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aaa000000000aaa11765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1aaa0000000aaa111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1aaaa00000aaaa111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11aaaa000aaaa1111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111aaa000aaa11111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001765761100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001766661100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001766661100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001176611100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001117111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
