pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- vania
--
function _init()
	texture()
end

function _update()
end

function _draw()
	cls()
	map(0,0,112,48,16,16)
end

function texture()
	for i=0,127 do
		for j=0,63 do
			if mget(i,j)==1 then
				if rnd(100)>94 then
					mset(i,j,3)
				elseif rnd(100)>76 then
					mset(i,j,2)
				end
			end
		end
	end
end

-- resets player.
-- add(init,function()
-- 	p_x=0
-- 	p_y=0
-- 	p_dx=0
-- 	p_dy=0
-- 	p_t=0
-- 	hat=32+flr(rnd(2))
-- 	cam_x=0
-- 	cam_y=0
-- end)

-- reads horizontal input.
-- add(update,function()
-- 	if btn(0) and btn(1) then
-- 		p_dx=0
-- 	elseif btn(0) then
-- 		p_dx=-3
-- 		p_z=true
-- 	elseif btn(1) then
-- 		p_dx=3
-- 		p_z=false
-- 	end
-- end)

-- reads vertical input.
-- add(update,function()
-- 	fastfall=btn(3) and p_dy>5
-- 	if btn(4) and not btn(3) then
-- 		if p_land and p_rel then
-- 			p_land=false
-- 			p_dy=-7
-- 		end
-- 		p_rel=false
-- 	else
-- 		p_rel=true
-- 	end
-- end)

-- add(update,function()
-- 	local t,tx,ty
-- 	if(abs(p_dx)<1)return
-- 	for i=1,abs(p_dx) do
-- 		p_x+=sgn(p_dx)
-- 		for j=1,6,5 do
-- 			tx=(p_x+j)/8
-- 			ty=p_y/8
-- 			t=mget(tx,ty)
-- 			if fget(t,1) then
-- 				p_x-=sgn(p_dx)
-- 				p_dx=0
-- 				return
-- 			end
-- 		end
-- 	end
-- end)

-- add(update,function()
-- 	local t,tx,ty
-- 	for i=1,abs(p_dy) do
-- 		p_y+=sgn(p_dy)
-- 		for j=1,6,5 do
-- 			tx=(p_x+j)/8
-- 			ty=p_y/8
-- 			t=mget(tx,ty)
-- 			if fget(t,1) then
-- 				p_y-=sgn(p_dy)
-- 				p_land=true
-- 				return
-- 			end
-- 			p_land=false
-- 		end
-- 	end
-- end)

-- add(update,function()
-- 	if p_dx!=0 then
-- 		p_dx-=sgn(p_dx)
-- 	end
-- 	if abs(p_dx)<1 then
-- 		p_dx=0
-- 	end
-- 	if fastfall then
-- 		p_dy=14
-- 	else
-- 		p_dy=min(p_dy+1,6)
-- 	end
-- 	p_t+=1
-- end)

-- updates camera.
-- add(update,function()
-- 	cam_x=min(max(p_x-60,0),256)
-- 	cam_y=min(max(p_y-88,0),128)
-- end)

-- draws map.
-- add(draw,function()
-- 	cls()
-- 	camera(cam_x,cam_y)
-- 	map(0,0,0,0,128,64)
-- end)

-- animates player.
-- add(draw,function()
-- 	p_f=49
-- 	if p_land and abs(p_dx)>1 then
-- 		p_f=48+flr(p_t/4)%4
-- 	elseif not p_land and p_dy<3 then
-- 		p_f=50
-- 	end
-- end)

-- draws player.
-- add(draw,function()
-- 	hat_y=p_f%2==0 and 1 or 0
-- 	spr(p_f,p_x,p_y-7,1,1,p_z)
-- 	spr(hat,p_x,p_y-hat_y-7,1,1,p_z)
-- end)
__gfx__
00000000665566666655665655666655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666566666665665556666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666556666665566556656665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555555555555556555565000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000566666655665566566665665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700666666656665666566666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666556666665566666655000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000ccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000088880000ccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000088877700011aa100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007000007088888888ccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777700700000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777770000000007777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
71111110777777707111111077777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
71b11b107111111071b11b1071111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7111111071b11b107111111071b11b10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99999990711111109999999071111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04444400999999900444440099999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09000900044444009000009004444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000090009000000000090000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010
__gff__
0002020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
