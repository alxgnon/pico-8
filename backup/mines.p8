pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	poke(24365,1)
	local i=1
	while i<=30 do
		mx,my=flr(rnd(16)),flr(rnd(16))
		if mget(mx,my)==26 then
			mset(mx,my,27)
			local t
			t=mget(mx-1,my-1)
			if(t!=27)mset(mx-1,my-1,(t-15)%10+16)
			t=mget(mx,my-1)
			if(t!=27)mset(mx,my-1,(t-15)%10+16)
			t=mget(mx+1,my-1)
			if(t!=27)mset(mx+1,my-1,(t-15)%10+16)
			t=mget(mx-1,my)
			if(t!=27)mset(mx-1,my,(t-15)%10+16)
			t=mget(mx+1,my)
			if(t!=27)mset(mx+1,my,(t-15)%10+16)
			t=mget(mx-1,my+1)
			if(t!=27)mset(mx-1,my+1,(t-15)%10+16)
			t=mget(mx,my+1)
			if(t!=27)mset(mx,my+1,(t-15)%10+16)
			t=mget(mx+1,my+1)
			if(t!=27)mset(mx+1,my+1,(t-15)%10+16)
			i+=1
		end
	end
end

function _update()
	mx,my,mkey=stat(32),stat(33),stat(34)
	tx,ty=flr(mx/8),flr(my/8)
	tile=mget(tx,ty)
	if mkey==1 and tile>16 then
		mset(tx,ty,tile-16)
		local t
		t=mget(tx-1,ty-1)
		if(t!=27)mset(tx-1,ty-1,(t-15)%10+16)
		t=mget(tx,ty-1)
		if(t!=27)mset(mx,my-1,(t-15)%10+16)
		t=mget(mx+1,my-1)
		if(t!=27)mset(mx+1,my-1,(t-15)%10+16)
		t=mget(mx-1,my)
		if(t!=27)mset(mx-1,my,(t-15)%10+16)
		t=mget(mx+1,my)
		if(t!=27)mset(mx+1,my,(t-15)%10+16)
		t=mget(mx-1,my+1)
		if(t!=27)mset(mx-1,my+1,(t-15)%10+16)
		t=mget(mx,my+1)
		if(t!=27)mset(mx,my+1,(t-15)%10+16)
		t=mget(mx+1,my+1)
		if(t!=27)mset(mx+1,my+1,(t-15)%10+16)
	end
end

function _draw()
	cls()
	map(0,0,0,0,16,16)
	pset(mx,my,7)
end
__gfx__
00000000555555505555555055555550555555505555555055555550555555505555555056555550555555502222222000000000000000000000000000000000
0000000055cc555055bbb5505588855055a5a55055eee55055fff550556665505544455058888880555555502727272000000000000000000000000000000000
00700700555c55505555b5505555855055a5a55055e5555055f55550555565505545455056588880555555502278722000000000000000000000000000000000
00077000555c555055bbb5505588855055aaa55055eee55055fff550555565505544455056588880555555502788872000000000000000000000000000000000
00077000555c555055b55550555585505555a5505555e55055f5f550555565505545455058888880555555502278722000000000000000000000000000000000
0070070055ccc55055bbb550558885505555a55055eee55055fff550555565505544455056555550555555502727272000000000000000000000000000000000
00000000555555505555555055555550555555505555555055555550555555505555555056555550555555502222222000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000
__map__
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
