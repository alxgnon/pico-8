pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- asura
--
-->8
-- deva
function _deva(x,y,ctrl)
	return{
		x=x,
		y=y,
		dx=0,
		dy=0,
		ng=0,
		flap=0,
		dive=0,
		control=function(a)
			if btn"0" then
				a.dx=-2
			end
			if btn"1" then
				a.dx=2
			end
			if btn"2" then
				a.dyr=2
			end
			if btn"4" and a.flap==0 and a.dive==0 then
				if btn"3" then
					a.dive=1
					a.dy=12
				else
					a.flap=1
					a.dy=-8
				end
			end
			if -0.777<=a.dy then
				a.flap=0
			end
			if a.dy<=0.777 then
				a.dive=0
			end
		end,
		update=function(a)
			a.x+=a.dx
			a.y+=a.dy
			a.dx*=0.777
			a.dy*=0.777
		end,
		draw=function(a)
			local f=abs(a.flap+a.dive)
			local x,y=a.x,a.y
			spr(2+f,x-8,y,1,1,true)
			spr(2+f,x+8,y)
			spr(1,x,y)
		end
	}
end
-->8

-->8
-- init
function _init()
	actors={}
	pl=_deva(64,64,true)
	add(actors,pl)
end

-- update
function _update()
	for a in all(actors) do
		if a==pl then
			a:control()
		end
		a:update()
	end
end

-- draw
function _draw()
	cls()
	for a in all(actors) do
		a:draw()
	end
end
__gfx__
0000000000aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a0aaaa0a7777777077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaa00aaa7777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aa0000aa0777777707777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aa0000aa0077077700777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaa00aaa0000007700077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a0aaaa0a0000000000077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaa000000000000007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
